// Tiny replacement for Bootstrap's collapse and dropdown used by the sidebar
(function () {
  "use strict";
  // Collapse: toggle elements with data-bs-toggle="collapse" and target via href or data-bs-target
  document.addEventListener("click", function (e) {
    var t = e.target.closest('[data-bs-toggle="collapse"]');
    if (!t) return;
    e.preventDefault();
    var targetSel = t.getAttribute("data-bs-target") || t.getAttribute("href");
    if (!targetSel) return;
    try {
      var target = document.querySelector(targetSel);
      if (!target) return;
      target.classList.toggle("show");
    } catch (err) {
      console.error(err);
    }
  });

  // Dropdown: simple toggle for elements with data-bs-toggle="dropdown"
  document.addEventListener("click", function (e) {
    var t = e.target.closest('[data-bs-toggle="dropdown"]');
    if (!t) return;
    e.preventDefault();
    var menu = t.nextElementSibling;
    if (!menu) return;
    menu.classList.toggle("show");
  });

  // Close dropdowns when clicking outside
  document.addEventListener("click", function (e) {
    if (e.target.closest('[data-bs-toggle="dropdown"]')) return;
    document.querySelectorAll(".dropdown-menu.show").forEach(function (m) {
      m.classList.remove("show");
    });
  });
})();
